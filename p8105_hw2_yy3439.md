p8105_hw2_yy3439
================
2023-10-03

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)
```

## Problem 1

Firstly, import the `pols-month.csv` file

``` r
pols_data = read_csv(file = "./fivethirtyeight_datasets/pols-month.csv") #import the pols-month csv file
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

Firstly,

``` r
pols_data |>
   janitor::clean_names() |> #clean-up names to r suitable names
   separate(mon, into = c("year", "month", "day"), sep = "-") |> #separate the mon variable by "-"
   mutate(
     month = as.numeric(month), #change the char variable month to numeric
     month = month.name[month]) |> #translate numeric month number to full month names
  select(-prez_dem, -prez_gop) |> #remove the prez_dem and prez_gop variables
   pivot_longer(
    gov_gop:rep_dem, #select the remaining columns
     values_to = "president") |> #and assign the values of these variables to a new variable "president"
      select(-day) #remove the day variable
```

    ## # A tibble: 4,932 × 4
    ##    year  month    name    president
    ##    <chr> <chr>    <chr>       <dbl>
    ##  1 1947  January  gov_gop        23
    ##  2 1947  January  sen_gop        51
    ##  3 1947  January  rep_gop       253
    ##  4 1947  January  gov_dem        23
    ##  5 1947  January  sen_dem        45
    ##  6 1947  January  rep_dem       198
    ##  7 1947  February gov_gop        23
    ##  8 1947  February sen_gop        51
    ##  9 1947  February rep_gop       253
    ## 10 1947  February gov_dem        23
    ## # ℹ 4,922 more rows

Secondly,

``` r
snp_data = read_csv(file = "./fivethirtyeight_datasets/snp.csv") #load the snp.csv file
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Clean the snp data

``` r
snp_data|>
   janitor::clean_names() |> #clean-up names to r suitable names
  mutate(date = as.Date(date, format = "%m/%d/%y"))|>
   separate(date, into = c("year", "month"), sep = "-") |>#separate the date variable into year, month, and day
   mutate(
     month = as.numeric(month), #change the char variable month to numeric
     month = month.name[month])|>
  arrange(year, month)|>  #rearrange by the order of year and month
  relocate(year, month, everything())
```

    ## Warning: Expected 2 pieces. Additional pieces discarded in 787 rows [1, 2, 3, 4, 5, 6,
    ## 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, ...].

    ## # A tibble: 787 × 3
    ##    year  month    close
    ##    <chr> <chr>    <dbl>
    ##  1 1969  April    104. 
    ##  2 1969  August    95.5
    ##  3 1969  December  92.1
    ##  4 1969  February  98.1
    ##  5 1969  January  103. 
    ##  6 1969  July      91.8
    ##  7 1969  June      97.7
    ##  8 1969  March    102. 
    ##  9 1969  May      103. 
    ## 10 1969  November  93.8
    ## # ℹ 777 more rows

Thirdly,

``` r
unemploy_data = read_csv(file = "./fivethirtyeight_datasets/unemployment.csv") #load the snp.csv file
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

### Merging Datasets

``` r
unemploy_data|>
   janitor::clean_names() |>
  pivot_longer(
    jan:dec,
    names_to = "month"
  )|>
  arrange(year, month)
```

    ## # A tibble: 816 × 3
    ##     year month value
    ##    <dbl> <chr> <dbl>
    ##  1  1948 apr     3.9
    ##  2  1948 aug     3.9
    ##  3  1948 dec     4  
    ##  4  1948 feb     3.8
    ##  5  1948 jan     3.4
    ##  6  1948 jul     3.6
    ##  7  1948 jun     3.6
    ##  8  1948 mar     4  
    ##  9  1948 may     3.5
    ## 10  1948 nov     3.8
    ## # ℹ 806 more rows

## Problem 2

``` r
library(readxl)
mr_tw_data = read_excel("./fivethirtyeight_datasets/ts.xlsx", sheet = "Mr. Trash Wheel", skip = 1) #load the excel file with Mr. Trash Wheel sheet and omit the first column with figure 
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

#### Tidy Data

``` r
mr_trash_wheel_data = mr_tw_data |> 
  janitor::clean_names() |> #clean names to appropriate r format
  select(dumpster:homes_powered)|> #omit non-data entries 
  drop_na(dumpster) |> #omit rows with no dumpster-specific data 
  mutate(
    homes_powered = ((weight_tons*500)/30), #add another variable based on the calculation in the notes
    tw_name = "Mr. Trash Wheel", #to keep track of the records after combining datasets 
    year = as.numeric(year) #change the variable type to merge datasets
    
  )
```

Similarly, we follow the same cleanning process to organize the data for
Professor Trash Wheel and Gwynnda

``` r
professor_tw_data = read_excel("./fivethirtyeight_datasets/ts.xlsx", sheet = "Professor Trash Wheel", skip = 1)|>
   janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    homes_powered = ((weight_tons*500)/30),
    tw_name = "Professor Trash Wheel"

  )

gwynnda_tw_data = read_excel("./fivethirtyeight_datasets/ts.xlsx", sheet = "Gwynnda Trash Wheel", skip = 1)|>
   janitor::clean_names() |>
  drop_na(dumpster) |>
  mutate(
    homes_powered = ((weight_tons*500)/30),
     tw_name = "Gwynnda Trash Wheel"
  )
```

#### Combine Datasets

Finally, combining the above three datasets

``` r
trash_wheel = bind_rows(mr_trash_wheel_data, professor_tw_data, gwynnda_tw_data) |>
  select(trash_wheel_name = "tw_name", everything())
```

#### Discussion

The `Mr Trash Wheel` sheet has 584 observations. The
`Professor Trash Wheel` sheet has 106 observations, and the
`Gwynnda Trash Wheel` sheet has 155 observations. Specifically, all
these data is calculated after we omit rows with no specific dumpster
data. In addition, the final combined dataset `trash_wheel` contains 845
observations and 15 columns. Each sheet contains similar key variables
specifying various types of dumpsters: plastic bottles, polystyrene,
cigarette_butts and so on. Additionally, there are also variables such
as `weight_tons` and `volume_cubic_yards`, which can be used to quantify
the total dumpsters collected. The total weight of trash collected by
Professor Trash Wheel is 216.26, and the total number of cigarette butts
collected by Gwynnda in July of 2021 is 16300.
